sequenceDiagram
    participant User as ðŸ‘¤ User
    participant LB as âš–ï¸ Load Balancer
    participant NGINX as ðŸŒ NGINX
    participant Bouncer as ðŸ“¦ Lua Bouncer
    participant LAPI as ðŸ›¡ï¸ LAPI
    participant AppSec as ðŸ”¥ AppSec
    participant Backend as âš™ï¸ App Server

    User->>LB: HTTPS Request
    LB->>NGINX: + PROXY Protocol
    NGINX->>Bouncer: Process Request
    
    par IP Check
        Bouncer->>LAPI: Is IP banned?
        LAPI-->>Bouncer: No
    and WAF Check
        Bouncer->>AppSec: Analyze Request
        AppSec-->>Bouncer: Clean
    end
    
    Bouncer-->>NGINX: âœ… Allow
    NGINX->>Backend: Forward Request
    Backend-->>User: Response
